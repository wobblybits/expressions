import{r as ne,c as P,g as re,a as ae,b as I,d as $e,o as X,u as Re,e as oe,i as Se,s as Pe,f as Ae,h as R,j as Ee,m as xe,S as se,k as _e,l as ie,n as z,p as Le,q as C,t as k,w as q,x as B,y as D,z as N,A as Ce,B as ke,C as Fe,D as K}from"./client-C_lhlbup.js";function le(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function a(r,o){if(n)return!(n=!1);const s={to:r,options:o,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const c of t)c.listener({...s,from:c.location,retry:d=>{d&&(n=!0),c.navigate(r,{...o,resolve:!1})}});return!s.defaultPrevented}return{subscribe:e,confirm:a}}let J;function G(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),J=window.history.state._depth}G();function Oe(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Ie(t,e){let n=!1;return()=>{const a=J;G();const r=a==null?null:J-a;if(n){n=!1;return}r&&e(r)?(n=!0,window.history.go(-r)):t()}}const Ue=/^(?:[a-z0-9]+:)?\/\//i,Te=/^\/+|(\/)\/+$/g,ce="http://sr";function U(t,e=!1){const n=t.replace(Te,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function j(t,e,n){if(Ue.test(e))return;const a=U(t),r=n&&U(n);let o="";return!r||e.startsWith("/")?o=a:r.toLowerCase().indexOf(a.toLowerCase())!==0?o=a+r:o=r,(o||"/")+U(e,!o)}function qe(t,e){return U(t).replace(/\/*(\*.*)?$/g,"")+U(e)}function ue(t){const e={};return t.searchParams.forEach((n,a)=>{a in e?Array.isArray(e[a])?e[a].push(n):e[a]=[e[a],n]:e[a]=n}),e}function Be(t,e,n){const[a,r]=t.split("/*",2),o=a.split("/").filter(Boolean),s=o.length;return c=>{const d=c.split("/").filter(Boolean),i=d.length-s;if(i<0||i>0&&r===void 0&&!e)return null;const f={path:s?"":"/",params:{}},g=h=>n===void 0?void 0:n[h];for(let h=0;h<s;h++){const p=o[h],b=p[0]===":",l=b?d[h]:d[h].toLowerCase(),u=b?p.slice(1):p.toLowerCase();if(b&&H(l,g(u)))f.params[u]=l;else if(b||!H(l,u))return null;f.path+=`/${l}`}if(r){const h=i?d.slice(-i).join("/"):"";if(H(h,g(r)))f.params[r]=h;else return null}return f}}function H(t,e){const n=a=>a===t;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function De(t){const[e,n]=t.pattern.split("/*",2),a=e.split("/").filter(Boolean);return a.reduce((r,o)=>r+(o.startsWith(":")?2:3),a.length-(n===void 0?0:1))}function fe(t){const e=new Map,n=re();return new Proxy({},{get(a,r){return e.has(r)||ne(n,()=>e.set(r,P(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function de(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),a=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(a);)r.push(n+=e[1]),a=a.slice(e[0].length);return de(a).reduce((o,s)=>[...o,...r.map(c=>c+s)],[])}const Ne=100,je=ae(),he=ae();function We(t,e=""){const{component:n,preload:a,load:r,children:o,info:s}=t,c=!o||Array.isArray(o)&&!o.length,d={key:t,component:n,preload:a||r,info:s};return me(t.path).reduce((i,f)=>{for(const g of de(f)){const h=qe(e,g);let p=c?h:h.split("/*",1)[0];p=p.split("/").map(b=>b.startsWith(":")||b.startsWith("*")?b:encodeURIComponent(b)).join("/"),i.push({...d,originalPath:f,pattern:p,matcher:Be(p,!c,t.matchFilters)})}return i},[])}function Me(t,e=0){return{routes:t,score:De(t[t.length-1])*1e4-e,matcher(n){const a=[];for(let r=t.length-1;r>=0;r--){const o=t[r],s=o.matcher(n);if(!s)return null;a.unshift({...s,route:o})}return a}}}function me(t){return Array.isArray(t)?t:[t]}function pe(t,e="",n=[],a=[]){const r=me(t);for(let o=0,s=r.length;o<s;o++){const c=r[o];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const d=We(c,e);for(const i of d){n.push(i);const f=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!f)pe(c.children,i.pattern,n,a);else{const g=Me([...n],a.length);a.push(g)}n.pop()}}}return n.length?a:a.sort((o,s)=>s.score-o.score)}function V(t,e){for(let n=0,a=t.length;n<a;n++){const r=t[n].matcher(e);if(r)return r}return[]}function ze(t,e,n){const a=new URL(ce),r=P(f=>{const g=t();try{return new URL(g,a)}catch{return console.error(`Invalid path ${g}`),f}},a,{equals:(f,g)=>f.href===g.href}),o=P(()=>r().pathname),s=P(()=>r().search,!0),c=P(()=>r().hash),d=()=>"",i=X(s,()=>ue(r()));return{get pathname(){return o()},get search(){return s()},get hash(){return c()},get state(){return e()},get key(){return d()},query:n?n(i):fe(i)}}let x;function Ke(){return x}function He(t,e,n,a={}){const{signal:[r,o],utils:s={}}=t,c=s.parsePath||(m=>m),d=s.renderPath||(m=>m),i=s.beforeLeave||le(),f=j("",a.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!r().value&&o({value:f,replace:!0,scroll:!1});const[g,h]=I(!1);let p;const b=(m,v)=>{v.value===l()&&v.state===y()||(p===void 0&&h(!0),x=m,p=v,Pe(()=>{p===v&&(u(p.value),w(p.state),E[1]($=>$.filter(_=>_.pending)))}).finally(()=>{p===v&&Ae(()=>{x=void 0,m==="navigate"&&ye(p),h(!1),p=void 0})}))},[l,u]=I(r().value),[y,w]=I(r().state),A=ze(l,y,s.queryWrapper),S=[],E=I([]),F=P(()=>typeof a.transformUrl=="function"?V(e(),a.transformUrl(A.pathname)):V(e(),A.pathname)),Q=()=>{const m=F(),v={};for(let $=0;$<m.length;$++)Object.assign(v,m[$].params);return v},ge=s.paramsWrapper?s.paramsWrapper(Q,e):fe(Q),Y={pattern:f,path:()=>f,outlet:()=>null,resolvePath(m){return j(f,m)}};return $e(X(r,m=>b("native",m),{defer:!0})),{base:Y,location:A,params:ge,isRouting:g,renderPath:d,parsePath:c,navigatorFactory:ve,matches:F,beforeLeave:i,preloadRoute:be,singleFlight:a.singleFlight===void 0?!0:a.singleFlight,submissions:E};function we(m,v,$){oe(()=>{if(typeof v=="number"){v&&(s.go?s.go(v):console.warn("Router integration does not support relative routing"));return}const _=!v||v[0]==="?",{replace:W,resolve:L,scroll:M,state:O}={replace:!1,resolve:!_,scroll:!0,...$},T=L?m.resolvePath(v):j(_&&A.pathname||"",v);if(T===void 0)throw new Error(`Path '${v}' is not a routable path`);if(S.length>=Ne)throw new Error("Too many redirects");const Z=l();(T!==Z||O!==y())&&(Se||i.confirm(T,$)&&(S.push({value:Z,replace:W,scroll:M,state:y()}),b("navigate",{value:T,state:O})))})}function ve(m){return m=m||Re(he)||Y,(v,$)=>we(m,v,$)}function ye(m){const v=S[0];v&&(o({...m,replace:v.replace,scroll:v.scroll}),S.length=0)}function be(m,v){const $=V(e(),m.pathname),_=x;x="preload";for(let W in $){const{route:L,params:M}=$[W];L.component&&L.component.preload&&L.component.preload();const{preload:O}=L;v&&O&&ne(n(),()=>O({params:M,location:{pathname:m.pathname,search:m.search,hash:m.hash,query:ue(m),state:null,key:""},intent:"preload"}))}x=_}}function Ve(t,e,n,a){const{base:r,location:o,params:s}=t,{pattern:c,component:d,preload:i}=a().route,f=P(()=>a().path);d&&d.preload&&d.preload();const g=i?i({params:s,location:o,intent:x||"initial"}):void 0;return{parent:e,pattern:c,path:f,outlet:()=>d?R(d,{params:s,location:o,data:g,get children(){return n()}}):n(),resolvePath(p){return j(r.path(),p,f())}}}const Je=t=>e=>{const{base:n}=e,a=Ee(()=>e.children),r=P(()=>pe(a(),e.base||""));let o;const s=He(t,r,()=>o,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(s),R(je.Provider,{value:s,get children(){return R(Xe,{routerState:s,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[xe(()=>(o=re())&&null),R(Ge,{routerState:s,get branches(){return r()}})]}})}})};function Xe(t){const e=t.routerState.location,n=t.routerState.params,a=P(()=>t.preload&&oe(()=>{t.preload({params:n,location:e,intent:Ke()||"initial"})}));return R(se,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:r=>R(r,{params:n,location:e,get data(){return a()},get children(){return t.children}})})}function Ge(t){const e=[];let n;const a=P(X(t.routerState.matches,(r,o,s)=>{let c=o&&r.length===o.length;const d=[];for(let i=0,f=r.length;i<f;i++){const g=o&&o[i],h=r[i];s&&g&&h.route.key===g.route.key?d[i]=s[i]:(c=!1,e[i]&&e[i](),_e(p=>{e[i]=p,d[i]=Ve(t.routerState,d[i-1]||t.routerState.base,ee(()=>a()[i+1]),()=>t.routerState.matches()[i])}))}return e.splice(r.length).forEach(i=>i()),s&&c?s:(n=d[0],d)}));return ee(()=>a()&&n)()}const ee=t=>()=>R(se,{get when(){return t()},keyed:!0,children:e=>R(he.Provider,{value:e,get children(){return e.outlet()}})});function Qe([t,e],n,a){return[t,a?r=>e(a(r)):e]}function Ye(t){let e=!1;const n=r=>typeof r=="string"?{value:r}:r,a=Qe(I(n(t.get()),{equals:(r,o)=>r.value===o.value&&r.state===o.state}),void 0,r=>(!e&&t.set(r),z.registry&&!z.done&&(z.done=!0),r));return t.init&&ie(t.init((r=t.get())=>{e=!0,a[1](n(r)),e=!1})),Je({signal:a,create:t.create,utils:t.utils})}function Ze(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function et(t,e){const n=t&&document.getElementById(t);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const tt=new Map;function nt(t=!0,e=!1,n="/_server",a){return r=>{const o=r.base.path(),s=r.navigatorFactory(r.base);let c,d;function i(l){return l.namespaceURI==="http://www.w3.org/2000/svg"}function f(l){if(l.defaultPrevented||l.button!==0||l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)return;const u=l.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!u||e&&!u.hasAttribute("link"))return;const y=i(u),w=y?u.href.baseVal:u.href;if((y?u.target.baseVal:u.target)||!w&&!u.hasAttribute("state"))return;const S=(u.getAttribute("rel")||"").split(/\s+/);if(u.hasAttribute("download")||S&&S.includes("external"))return;const E=y?new URL(w,document.baseURI):new URL(w);if(!(E.origin!==window.location.origin||o&&E.pathname&&!E.pathname.toLowerCase().startsWith(o.toLowerCase())))return[u,E]}function g(l){const u=f(l);if(!u)return;const[y,w]=u,A=r.parsePath(w.pathname+w.search+w.hash),S=y.getAttribute("state");l.preventDefault(),s(A,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:S?JSON.parse(S):void 0})}function h(l){const u=f(l);if(!u)return;const[y,w]=u;a&&(w.pathname=a(w.pathname)),r.preloadRoute(w,y.getAttribute("preload")!=="false")}function p(l){clearTimeout(c);const u=f(l);if(!u)return d=null;const[y,w]=u;d!==y&&(a&&(w.pathname=a(w.pathname)),c=setTimeout(()=>{r.preloadRoute(w,y.getAttribute("preload")!=="false"),d=y},20))}function b(l){if(l.defaultPrevented)return;let u=l.submitter&&l.submitter.hasAttribute("formaction")?l.submitter.getAttribute("formaction"):l.target.getAttribute("action");if(!u)return;if(!u.startsWith("https://action/")){const w=new URL(u,ce);if(u=r.parsePath(w.pathname+w.search),!u.startsWith(n))return}if(l.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=tt.get(u);if(y){l.preventDefault();const w=new FormData(l.target,l.submitter);y.call({r,f:l.target},l.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}Le(["click","submit"]),document.addEventListener("click",g),t&&(document.addEventListener("mousemove",p,{passive:!0}),document.addEventListener("focusin",h,{passive:!0}),document.addEventListener("touchstart",h,{passive:!0})),document.addEventListener("submit",b),ie(()=>{document.removeEventListener("click",g),t&&(document.removeEventListener("mousemove",p),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",b)})}}function rt(t){const e=()=>{const a=window.location.pathname.replace(/^\/+/,"/")+window.location.search,r=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:a+window.location.hash,state:r}},n=le();return Ye({get:e,set({value:a,replace:r,scroll:o,state:s}){r?window.history.replaceState(Oe(s),"",a):window.history.pushState(s,"",a),et(decodeURIComponent(window.location.hash.slice(1)),o),G()},init:a=>Ze(window,"popstate",Ie(a,r=>{if(r&&r<0)return!n.confirm(r);{const o=e();return!n.confirm(o.value,{state:o.state})}})),create:nt(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:a=>window.history.go(a),beforeLeave:n}})(t)}function at(t){t.forEach(e=>{if(!e.attrs.href)return;let n=document.head.querySelector(`link[href="${e.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",e.attrs.href),document.head.appendChild(n))})}var ot=k("<style>"),st=k("<link>"),it=k("<script> "),lt=k("<noscript>");const ct={style:t=>(()=>{var e=C(ot);return q(e,B(()=>t.attrs),!1,!0),N(e,()=>t.children),D(),e})(),link:t=>(()=>{var e=C(st);return q(e,B(()=>t.attrs),!1,!1),D(),e})(),script:t=>t.attrs.src?(()=>{var e=C(it);return q(e,B(()=>t.attrs,{get id(){return t.key}}),!1,!0),D(),e})():null,noscript:t=>(()=>{var e=C(lt);return q(e,B(()=>t.attrs),!1,!0),D(),e})()};function ut(t,e){let{tag:n,attrs:{key:a,...r}={key:void 0},children:o}=t;return ct[n]({attrs:{...r,nonce:e},key:a,children:o})}function ft(t,e,n,a="default"){return Ce(async()=>{{const o=(await t.import())[a],c=(await e.inputs?.[t.src].assets()).filter(i=>i.tag==="style"||i.attrs.rel==="stylesheet");return typeof window<"u"&&at(c),{default:i=>[...c.map(f=>ut(f)),R(o,i)]}}})}function dt(){function t(n){return{...n,...n.$$route?n.$$route.require().route:void 0,info:{...n.$$route?n.$$route.require().route.info:{},filesystem:!0},component:n.$component&&ft(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(t):void 0}}return ke.map(t)}let te;const ht=()=>te||(te=dt());var mt=k("<div><div>Debug: Router is working</div><div>Current pathname: <!$><!/></div><div>Normalized path: <!$><!/></div><!$><!/>"),pt=k("<div id=loading>Loading...");const vt=()=>R(rt,{base:"/ellipses/.output/public/",root:e=>{const n=e.location.pathname,a=n.replace(/\.html$/,"");return console.log("Full pathname:",n),console.log("Normalized for routing:",a),R(Fe,{get fallback(){return C(pt)},get children(){var r=C(mt),o=r.firstChild,s=o.nextSibling,c=s.firstChild,d=c.nextSibling,[i,f]=K(d.nextSibling),g=s.nextSibling,h=g.firstChild,p=h.nextSibling,[b,l]=K(p.nextSibling),u=g.nextSibling,[y,w]=K(u.nextSibling);return N(s,n,i,f),N(g,a,b,l),N(r,()=>e.children,y,w),r}})},get children(){return R(ht,{})}});export{vt as default};
