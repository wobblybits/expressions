import{P as T}from"./PageLayout-DMiXyjle.js";import{b as w,F as x,G as z,t as c,w as p,H as n,A as g,i as l,I as S,J as v,m as A}from"./web-BjSrF1zk.js";import{E as D,a as H,S as J,N as f,F as R}from"./Face-CMEODpwO.js";import{C as W}from"./ClientOnly-B3hFWBc-.js";var q=p('<div style="max-width:100%;max-height:100%;aspect-ratio:1 / 1;object-fit:contain;margin-top:2em"><div id=composite-grid style="grid-template-columns:auto repeat(8, 1fr);grid-template-rows:auto repeat(8, 1fr);align-items:center;justify-items:center;object-fit:contain"><div class=grid-label></div><!$><!/><!$><!/>'),B=p("<div style=align-items:center;justify-content:center;padding:2em;box-sizing:border-box>"),K=p("<div id=loading>"),E=p("<div class=grid-label><h4>"),Q=p('<div style="background:white;border:1px solid black;min-width:4em;min-height:4em;align-items:center;justify-content:center;object-fit:contain;aspect-ratio:1 / 1">'),U=p("<div>");const V=()=>{const C=new D,k=new H(C),y={angry:80,contempt:120,disgust:80,fear:150,happy:80,neutral:80,sad:50,surprise:80},j=new J(140,140),[_,$]=w(new Set),[F,M]=w(new Set);x(()=>{$(new Set(["face0-0"]))}),z(()=>{console.log("effect");const t=F(),r=_();for(let e=0;e<Object.keys(f).length;e++)for(let o=0;o<Object.keys(f).length;o++){const i=`face${e}-${o}`;if(!t.has(i)&&!r.has(i)){$(s=>new Set([...s,i]));break}}});const N=t=>{M(r=>new Set([...r,t])),$(r=>{const e=new Set(r);return e.delete(t),e})};return x(()=>{const t=new MutationObserver(r=>{r.forEach(e=>{e.type==="childList"&&e.addedNodes.forEach(o=>{if(o.nodeType===Node.ELEMENT_NODE){const i=o;if(i.tagName==="IMG"&&i.src&&i.src.startsWith("data:")){const s=i.closest(".face");s&&s.id&&N(s.id)}}})})});return t.observe(document.body,{childList:!0,subtree:!0}),()=>t.disconnect()}),(()=>{var t=c(B);return n(t,"width","90vw"),n(t,"height","95vh"),n(t,"display","flex"),g(t,l(W,{get fallback(){return c(K)},get children(){var r=c(q),e=r.firstChild,o=e.firstChild,i=o.nextSibling,[s,O]=S(i.nextSibling),L=s.nextSibling,[P,I]=S(L.nextSibling);return n(e,"display","grid"),n(e,"gap","2px"),g(e,l(v,{get each(){return Object.keys(f)},children:(h,b)=>(()=>{var a=c(E),d=a.firstChild;return g(d,h),a})()}),s,O),g(e,l(v,{get each(){return Object.keys(f)},children:(h,b)=>[(()=>{var a=c(E),d=a.firstChild;return g(d,h),a})(),l(v,{get each(){return Object.keys(f)},children:(a,d)=>(()=>{var m=c(Q);return n(m,"width","auto"),n(m,"height","auto"),n(m,"display","flex"),n(m,"overflow","hidden"),g(m,(()=>{var G=A(()=>!!_().has(`face${b()}-${d()}`));return()=>G()?l(R,{get id(){return`face${b()}-${d()}`},width:140,height:140,expressionModel:k,get emotionLevels(){return{[h]:y[h],[a]:y[a]}},scene:j}):(()=>{var u=c(U);return n(u,"width","100%"),n(u,"height","100%"),n(u,"background","#333"),u})()})()),m})()})]}),P,I),r}})),t})()},te=()=>l(T,{title:"Composite Emotions",description:"Explore emotion combinations and matrices",get children(){return l(V,{})}});export{te as default};
